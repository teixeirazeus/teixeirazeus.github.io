<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Como programar igual a NASA | Thiago Teixeira</title><meta name=keywords content="programação,nasa"><meta name=description content="10 regras para sistemas críticos"><meta name=author content><link rel=canonical href=https://teixeirazeus.github.io/blog/code-like-nasa/><link crossorigin=anonymous href=/assets/css/stylesheet.min.a72801f0f40a8d7f71aa1cafd1c2f2a993a1f26ca1cfd38fdba65d5b9b0f08a0.css integrity="sha256-pygB8PQKjX9xqhyv0cLyqZOh8myhz9OP26ZdW5sPCKA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://teixeirazeus.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://teixeirazeus.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://teixeirazeus.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://teixeirazeus.github.io/apple-touch-icon.png><link rel=mask-icon href=https://teixeirazeus.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Como programar igual a NASA"><meta property="og:description" content="10 regras para sistemas críticos"><meta property="og:type" content="article"><meta property="og:url" content="https://teixeirazeus.github.io/blog/code-like-nasa/"><meta property="og:image" content="https://teixeirazeus.github.io/blog/code-like-nasa/nasa-logo.webp"><meta property="article:section" content="blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://teixeirazeus.github.io/blog/code-like-nasa/nasa-logo.webp"><meta name=twitter:title content="Como programar igual a NASA"><meta name=twitter:description content="10 regras para sistemas críticos"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://teixeirazeus.github.io/blog/"},{"@type":"ListItem","position":2,"name":"Como programar igual a NASA","item":"https://teixeirazeus.github.io/blog/code-like-nasa/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Como programar igual a NASA","name":"Como programar igual a NASA","description":"10 regras para sistemas críticos","keywords":["programação","nasa"],"articleBody":"Atualmente estou pesquisando maneiras de deixar meu código cada vez mais robusto. Em uma dessas pesquisas, encontrei um técnica utilizada pela NASA para programar sistemas criticos. Achei bem interessante e resolvi compartilhar aqui.\nA NASA, conhecida por seus rigorosos padrões de segurança e confiabilidade, segue uma série de diretrizes de codificação conhecidas como “The Power of 10 Rules”. Essas regras foram concebidas por Gerard J. Holzmann do Laboratório de Propulsão a Jato da NASA.\n1.Evite construções de fluxo complexas, como goto e recursão O fluxo do código deve ser o mais simples possível, eliminando a utilização de goto e recursão. A recursão e o comando goto podem tornar o código confuso e mais difícil de entender e manter. Isso pode levar a erros mais facilmente.\n// Ruim void recursiveFunction(int n) { if (n == 0) return; recursiveFunction(n-1); } // Bom void iterativeFunction(int n) { for(int i = 0; i \u003c n; i++) { // Faça algo } } 2. Todos os loops devem ter limites fixos. Isso previne a execução descontrolada do código Loops com limites fixos ajudam a evitar loops infinitos que podem travar o sistema.\nDigamos que você tenha uma lista ligada, e você está procurando um elemento nela. Uma abordagem padrão seria percorrer a lista até encontrar o elemento ou até atingir o final da lista.\nstruct Node { int data; struct Node* next; }; void searchLinkedList(struct Node* head, int target) { struct Node* current = head; while(current != NULL) { if(current-\u003edata == target) { printf(\"Elemento encontrado.\\n\"); return; } current = current-\u003enext; } printf(\"Elemento não encontrado.\\n\"); } No entanto, essa abordagem pode levar a um loop infinito se houver um erro no código que cria a lista ligada, como um loop na lista. Para evitar isso, podemos adicionar um limite superior no número de iterações.\nvoid searchLinkedList(struct Node* head, int target) { struct Node* current = head; int counter = 0; while(current != NULL \u0026\u0026 counter \u003c 1000) { if(current-\u003edata == target) { printf(\"Elemento encontrado.\\n\"); return; } current = current-\u003enext; counter++; } if(counter == 1000) { printf(\"Limite superior atingido. Verifique a lista.\\n\"); } else { printf(\"Elemento não encontrado.\\n\"); } } Este código irá parar de procurar o elemento depois de 1000 iterações, independentemente de ter encontrado o elemento ou não. Isso pode ajudar a prevenir um loop infinito caso haja um problema com a lista ligada.\n3. Evite a alocação de memória no heap Muito dos bugs vem do vazamento de memória. A alocação de memória no heap deve ser evitada sempre que possível. Utilize sempre alocação estática.\n// Ruim int *p = (int*)malloc(sizeof(int)*10); // Bom int p[10]; 4. Restrinja funções a uma única página impressa Restringir as funções a uma única página impressa torna o código mais legível e mantém cada função focada em uma única tarefa. Aproximadamente 60 linhas de código. Cada função deve fazer somente uma coisa.\n5. Use no mínimo duas afirmações de tempo de execução por função As afirmações de tempo de execução ajudam a identificar erros no código.\nvoid someFunction(int n) { assert(n \u003e 0); // Faça algo assert(n == 0); // por exemplo, n deve ser zero depois de realizar a operação } 6. Restrinja o escopo dos dados ao menor possível Restringir o escopo dos dados pode prevenir erros e tornar o código mais seguro. Com isso você restringe o acesso a variáveis e funções somente onde elas são necessárias, diminuindo a chance de erros.\nvoid someFunction() { int localVar = 10; // só pode ser acessado dentro desta função } 7. Verifique o valor de retorno de todas as funções não-void Essa regra garante que erros não sejam ignorados e possam ser tratados adequadamente.\n// Bom int result = someFunction(); if (result == ERROR) { // trate o erro } 8. Use o pré-processador com moderação O uso excessivo do pré-processador pode tornar o código difícil de ler, ofuscando o código real e confunde análises estáticas.\n// Ruim #define SQUARE(x) ((x) * (x)) // Bom int square(int x) { return x * x; } 9. Limite o uso de ponteiros a uma única desreferência e não use ponteiros de função Os ponteiros podem ser uma fonte de erros, portanto, seu uso deve ser minimizado. Eles não podem referenciar mais de uma camada de indireção e não devem ser usados para ponteiros de função. Não use ponteiros de função, eles ofuscam o código e podem ser substituídos por funções.\n// Ruim int** pp; *(*pp) = 10; // Bom int* p; *p = 10; 10. Todos os avisos devem ser tratados antes da liberação do software Isso ajuda a identificar e corrigir possíveis problemas antes que o software seja lançado.\nConclusão Na minha visão as regras focam em uma coisa, simplicidade. Quando mais simples e objetivo for o código, mais fácil será de entender e manter. Estas regras com a prática de testes unitários, podem ser uma grande arma no arsenal de qualquer desenvolvedor que se importa com a qualidade do seu código.\nSe quiser se aprofundar no tópico, você pode ler o documento da NASA que contém maiores detalhes sobre a sua padronização de código.\nReferências https://github.com/stanislaw/awesome-safety-critical/blob/master/Backup/JPL_Coding_Standard_C.pdf\nhttps://en.wikipedia.org/wiki/The_Power_of_10:_Rules_for_Developing_Safety-Critical_Code\nhttps://betterprogramming.pub/the-power-of-10-nasas-rules-for-coding-43ae1764f73d\nhttps://www.youtube.com/watch?v=GWYhtksrmhE\nhttps://www.youtube.com/watch?v=M5uxjrdEdtA\n","wordCount":"852","inLanguage":"en","image":"https://teixeirazeus.github.io/blog/code-like-nasa/nasa-logo.webp","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://teixeirazeus.github.io/blog/code-like-nasa/"},"publisher":{"@type":"Organization","name":"Thiago Teixeira","logo":{"@type":"ImageObject","url":"https://teixeirazeus.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class="header sticky-header"><nav class=nav><div class=logo><a href=https://teixeirazeus.github.io/ accesskey=h title="Thiago Teixeira (Alt + H)">Thiago Teixeira</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://teixeirazeus.github.io/ title=Home><span>Home</span></a></li><li><a href=https://teixeirazeus.github.io/blog title=Blog><span>Blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://teixeirazeus.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://teixeirazeus.github.io/blog/>Blogs</a></div><h1 class=post-title>Como programar igual a NASA</h1><div class=post-description>10 regras para sistemas críticos</div><div class=post-meta>Jun 2023</div></header><figure class=entry-cover><img loading=lazy src=https://teixeirazeus.github.io/blog/code-like-nasa/nasa-logo.webp alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>‎ Table of Contents</span></summary><div class=inner><ul><li><a href=#1evite-constru%c3%a7%c3%b5es-de-fluxo-complexas-como-goto-e-recurs%c3%a3o aria-label="1.Evite construções de fluxo complexas, como goto e recursão">1.Evite construções de fluxo complexas, como goto e recursão</a></li><li><a href=#2-todos-os-loops-devem-ter-limites-fixos-isso-previne-a-execu%c3%a7%c3%a3o-descontrolada-do-c%c3%b3digo aria-label="2. Todos os loops devem ter limites fixos. Isso previne a execução descontrolada do código">2. Todos os loops devem ter limites fixos. Isso previne a execução descontrolada do código</a></li><li><a href=#3-evite-a-aloca%c3%a7%c3%a3o-de-mem%c3%b3ria-no-heap aria-label="3. Evite a alocação de memória no heap">3. Evite a alocação de memória no heap</a></li><li><a href=#4-restrinja-fun%c3%a7%c3%b5es-a-uma-%c3%banica-p%c3%a1gina-impressa aria-label="4. Restrinja funções a uma única página impressa">4. Restrinja funções a uma única página impressa</a></li><li><a href=#5-use-no-m%c3%adnimo-duas-afirma%c3%a7%c3%b5es-de-tempo-de-execu%c3%a7%c3%a3o-por-fun%c3%a7%c3%a3o aria-label="5. Use no mínimo duas afirmações de tempo de execução por função">5. Use no mínimo duas afirmações de tempo de execução por função</a></li><li><a href=#6-restrinja-o-escopo-dos-dados-ao-menor-poss%c3%advel aria-label="6. Restrinja o escopo dos dados ao menor possível">6. Restrinja o escopo dos dados ao menor possível</a></li><li><a href=#7-verifique-o-valor-de-retorno-de-todas-as-fun%c3%a7%c3%b5es-n%c3%a3o-void aria-label="7. Verifique o valor de retorno de todas as funções não-void">7. Verifique o valor de retorno de todas as funções não-void</a></li><li><a href=#8-use-o-pr%c3%a9-processador-com-modera%c3%a7%c3%a3o aria-label="8. Use o pré-processador com moderação">8. Use o pré-processador com moderação</a></li><li><a href=#9-limite-o-uso-de-ponteiros-a-uma-%c3%banica-desrefer%c3%aancia-e-n%c3%a3o-use-ponteiros-de-fun%c3%a7%c3%a3o aria-label="9. Limite o uso de ponteiros a uma única desreferência e não use ponteiros de função">9. Limite o uso de ponteiros a uma única desreferência e não use ponteiros de função</a></li><li><a href=#10-todos-os-avisos-devem-ser-tratados-antes-da-libera%c3%a7%c3%a3o-do-software aria-label="10. Todos os avisos devem ser tratados antes da liberação do software">10. Todos os avisos devem ser tratados antes da liberação do software</a></li><li><a href=#conclus%c3%a3o aria-label=Conclusão>Conclusão</a></li><li><a href=#refer%c3%aancias aria-label=Referências>Referências</a></li></ul></div></details></div><div class=post-content><p>Atualmente estou pesquisando maneiras de deixar meu código cada vez mais robusto. Em uma dessas pesquisas, encontrei um técnica utilizada pela NASA para programar sistemas criticos. Achei bem interessante e resolvi compartilhar aqui.</p><p>A NASA, conhecida por seus rigorosos padrões de segurança e confiabilidade, segue uma série de diretrizes de codificação conhecidas como &ldquo;The Power of 10 Rules&rdquo;. Essas regras foram concebidas por Gerard J. Holzmann do Laboratório de Propulsão a Jato da NASA.</p><h2 id=1evite-construções-de-fluxo-complexas-como-goto-e-recursão>1.Evite construções de fluxo complexas, como goto e recursão<a hidden class=anchor aria-hidden=true href=#1evite-construções-de-fluxo-complexas-como-goto-e-recursão>#</a></h2><p>O fluxo do código deve ser o mais simples possível, eliminando a utilização de goto e recursão.
A recursão e o comando goto podem tornar o código confuso e mais difícil de entender e manter. Isso pode levar a erros mais facilmente.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>// Ruim
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>recursiveFunction</span>(<span style=color:#66d9ef>int</span> n) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>recursiveFunction</span>(n<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Bom
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>iterativeFunction</span>(<span style=color:#66d9ef>int</span> n) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Faça algo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=2-todos-os-loops-devem-ter-limites-fixos-isso-previne-a-execução-descontrolada-do-código>2. Todos os loops devem ter limites fixos. Isso previne a execução descontrolada do código<a hidden class=anchor aria-hidden=true href=#2-todos-os-loops-devem-ter-limites-fixos-isso-previne-a-execução-descontrolada-do-código>#</a></h2><p>Loops com limites fixos ajudam a evitar loops infinitos que podem travar o sistema.</p><p>Digamos que você tenha uma lista ligada, e você está procurando um elemento nela. Uma abordagem padrão seria percorrer a lista até encontrar o elemento ou até atingir o final da lista.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>struct</span> Node {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> data;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> Node<span style=color:#f92672>*</span> next;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>searchLinkedList</span>(<span style=color:#66d9ef>struct</span> Node<span style=color:#f92672>*</span> head, <span style=color:#66d9ef>int</span> target) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> Node<span style=color:#f92672>*</span> current <span style=color:#f92672>=</span> head;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span>(current <span style=color:#f92672>!=</span> NULL) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(current<span style=color:#f92672>-&gt;</span>data <span style=color:#f92672>==</span> target) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;Elemento encontrado.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        current <span style=color:#f92672>=</span> current<span style=color:#f92672>-&gt;</span>next;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;Elemento não encontrado.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>No entanto, essa abordagem pode levar a um loop infinito se houver um erro no código que cria a lista ligada, como um loop na lista. Para evitar isso, podemos adicionar um limite superior no número de iterações.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>searchLinkedList</span>(<span style=color:#66d9ef>struct</span> Node<span style=color:#f92672>*</span> head, <span style=color:#66d9ef>int</span> target) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> Node<span style=color:#f92672>*</span> current <span style=color:#f92672>=</span> head;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> counter <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span>(current <span style=color:#f92672>!=</span> NULL <span style=color:#f92672>&amp;&amp;</span> counter <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1000</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(current<span style=color:#f92672>-&gt;</span>data <span style=color:#f92672>==</span> target) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;Elemento encontrado.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        current <span style=color:#f92672>=</span> current<span style=color:#f92672>-&gt;</span>next;
</span></span><span style=display:flex><span>        counter<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(counter <span style=color:#f92672>==</span> <span style=color:#ae81ff>1000</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;Limite superior atingido. Verifique a lista.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;Elemento não encontrado.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Este código irá parar de procurar o elemento depois de 1000 iterações, independentemente de ter encontrado o elemento ou não. Isso pode ajudar a prevenir um loop infinito caso haja um problema com a lista ligada.</p><h2 id=3-evite-a-alocação-de-memória-no-heap>3. Evite a alocação de memória no heap<a hidden class=anchor aria-hidden=true href=#3-evite-a-alocação-de-memória-no-heap>#</a></h2><p>Muito dos bugs vem do vazamento de memória. A alocação de memória no heap deve ser evitada sempre que possível. Utilize sempre alocação estática.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>// Ruim
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#f92672>*</span>p <span style=color:#f92672>=</span> (<span style=color:#66d9ef>int</span><span style=color:#f92672>*</span>)<span style=color:#a6e22e>malloc</span>(<span style=color:#66d9ef>sizeof</span>(<span style=color:#66d9ef>int</span>)<span style=color:#f92672>*</span><span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Bom
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> p[<span style=color:#ae81ff>10</span>];
</span></span></code></pre></div><h2 id=4-restrinja-funções-a-uma-única-página-impressa>4. Restrinja funções a uma única página impressa<a hidden class=anchor aria-hidden=true href=#4-restrinja-funções-a-uma-única-página-impressa>#</a></h2><p>Restringir as funções a uma única página impressa torna o código mais legível e mantém cada função focada em uma única tarefa. Aproximadamente 60 linhas de código.
Cada função deve fazer somente uma coisa.</p><h2 id=5-use-no-mínimo-duas-afirmações-de-tempo-de-execução-por-função>5. Use no mínimo duas afirmações de tempo de execução por função<a hidden class=anchor aria-hidden=true href=#5-use-no-mínimo-duas-afirmações-de-tempo-de-execução-por-função>#</a></h2><p>As afirmações de tempo de execução ajudam a identificar erros no código.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>someFunction</span>(<span style=color:#66d9ef>int</span> n) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>(n <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Faça algo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>assert</span>(n <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>); <span style=color:#75715e>// por exemplo, n deve ser zero depois de realizar a operação
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h2 id=6-restrinja-o-escopo-dos-dados-ao-menor-possível>6. Restrinja o escopo dos dados ao menor possível<a hidden class=anchor aria-hidden=true href=#6-restrinja-o-escopo-dos-dados-ao-menor-possível>#</a></h2><p>Restringir o escopo dos dados pode prevenir erros e tornar o código mais seguro. Com isso você restringe o acesso a variáveis e funções somente onde elas são necessárias, diminuindo a chance de erros.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>someFunction</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> localVar <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>; <span style=color:#75715e>// só pode ser acessado dentro desta função
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h2 id=7-verifique-o-valor-de-retorno-de-todas-as-funções-não-void>7. Verifique o valor de retorno de todas as funções não-void<a hidden class=anchor aria-hidden=true href=#7-verifique-o-valor-de-retorno-de-todas-as-funções-não-void>#</a></h2><p>Essa regra garante que erros não sejam ignorados e possam ser tratados adequadamente.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>// Bom
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> result <span style=color:#f92672>=</span> <span style=color:#a6e22e>someFunction</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (result <span style=color:#f92672>==</span> ERROR) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// trate o erro
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h2 id=8-use-o-pré-processador-com-moderação>8. Use o pré-processador com moderação<a hidden class=anchor aria-hidden=true href=#8-use-o-pré-processador-com-moderação>#</a></h2><p>O uso excessivo do pré-processador pode tornar o código difícil de ler, ofuscando o código real e confunde análises estáticas.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>// Ruim
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define SQUARE(x) ((x) * (x))
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Bom
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>square</span>(<span style=color:#66d9ef>int</span> x) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> x;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=9-limite-o-uso-de-ponteiros-a-uma-única-desreferência-e-não-use-ponteiros-de-função>9. Limite o uso de ponteiros a uma única desreferência e não use ponteiros de função<a hidden class=anchor aria-hidden=true href=#9-limite-o-uso-de-ponteiros-a-uma-única-desreferência-e-não-use-ponteiros-de-função>#</a></h2><p>Os ponteiros podem ser uma fonte de erros, portanto, seu uso deve ser minimizado. Eles não podem referenciar mais de uma camada de indireção e não devem ser usados para ponteiros de função.
Não use ponteiros de função, eles ofuscam o código e podem ser substituídos por funções.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>// Ruim
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span><span style=color:#f92672>**</span> pp;
</span></span><span style=display:flex><span><span style=color:#f92672>*</span>(<span style=color:#f92672>*</span>pp) <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Bom
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span><span style=color:#f92672>*</span> p;
</span></span><span style=display:flex><span><span style=color:#f92672>*</span>p <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>;
</span></span></code></pre></div><h2 id=10-todos-os-avisos-devem-ser-tratados-antes-da-liberação-do-software>10. Todos os avisos devem ser tratados antes da liberação do software<a hidden class=anchor aria-hidden=true href=#10-todos-os-avisos-devem-ser-tratados-antes-da-liberação-do-software>#</a></h2><p>Isso ajuda a identificar e corrigir possíveis problemas antes que o software seja lançado.</p><h2 id=conclusão>Conclusão<a hidden class=anchor aria-hidden=true href=#conclusão>#</a></h2><p>Na minha visão as regras focam em uma coisa, simplicidade. Quando mais simples e objetivo for o código, mais fácil será de entender e manter. Estas regras com a prática de testes unitários, podem ser uma grande arma no arsenal de qualquer desenvolvedor que se importa com a qualidade do seu código.</p><p>Se quiser se aprofundar no tópico, você pode ler o <a href=https://github.com/stanislaw/awesome-safety-critical/blob/master/Backup/JPL_Coding_Standard_C.pdf>documento da NASA</a> que contém maiores detalhes sobre a sua padronização de código.</p><h2 id=referências>Referências<a hidden class=anchor aria-hidden=true href=#referências>#</a></h2><p><a href=https://github.com/stanislaw/awesome-safety-critical/blob/master/Backup/JPL_Coding_Standard_C.pdf>https://github.com/stanislaw/awesome-safety-critical/blob/master/Backup/JPL_Coding_Standard_C.pdf</a></p><p><a href=https://en.wikipedia.org/wiki/The_Power_of_10:_Rules_for_Developing_Safety-Critical_Code>https://en.wikipedia.org/wiki/The_Power_of_10:_Rules_for_Developing_Safety-Critical_Code</a></p><p><a href=https://betterprogramming.pub/the-power-of-10-nasas-rules-for-coding-43ae1764f73d>https://betterprogramming.pub/the-power-of-10-nasas-rules-for-coding-43ae1764f73d</a></p><p><a href="https://www.youtube.com/watch?v=GWYhtksrmhE">https://www.youtube.com/watch?v=GWYhtksrmhE</a></p><p><a href="https://www.youtube.com/watch?v=M5uxjrdEdtA">https://www.youtube.com/watch?v=M5uxjrdEdtA</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://teixeirazeus.github.io/tags/programa%C3%A7%C3%A3o/>programação</a></li><li><a href=https://teixeirazeus.github.io/tags/nasa/>nasa</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://teixeirazeus.github.io/>Thiago Teixeira</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>